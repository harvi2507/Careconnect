<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CareConnect | Explore Nurses</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Poppins',sans-serif}
body{
  margin:0;
  background:#eaf4ff;
  color:#1f2937;
}
:root{
  --blue-main:#0a73ff;
  --blue-soft:#eaf4ff;
  --white:#ffffff;
  --text-dark:#2b2b2b;
  --text-light:#6a6a6a;
}

*{box-sizing:border-box;font-family:'Poppins',sans-serif}

body{
  margin:0;
  background:var(--blue-soft);
  color:#1f2937;
}

/* ===== HEADER ===== */
.header{
  background:var(--white);
  padding:18px 30px;
  display:flex;
  align-items:center;
  box-shadow:0 8px 20px rgba(74,144,226,0.15);
}

.logo{
  display:flex;
  align-items:center;
}

.logo-icon{
  width:42px;
  height:42px;
  background:var(--blue-main);
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  margin-right:12px;
}

.logo-icon i{
  color:white;
  font-size:20px;
}

.logo-text{
  font-size:22px;
  font-weight:600;
  color:var(--text-dark);
}

.container{
  max-width:1150px;
  margin:auto;
  padding:40px 20px;
}
h1{margin-bottom:8px}
.subtitle{color:#6b7280;margin-bottom:26px}


/* ===== FILTER BAR ===== */
.filters{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  margin-bottom:30px;
}
.filter-btn{
  padding:10px 16px;
  border-radius:20px;
  border:1.5px solid #0a73ff;
  background:white;
  color:#0a73ff;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}
.filter-btn.active,
.filter-btn:hover{
  background:#0a73ff;
  color:white;
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:22px;
}

/* ===== CARD ===== */
.card{
  background:white;
  border-radius:22px;
  padding:20px;
  box-shadow:0 20px 50px rgba(0,0,0,.08);
  transition:.3s;
}
.card:hover{transform:translateY(-6px)}

.avatar{
  width:80px;height:80px;
  border-radius:20px;
  background:#eaf2ff;
  display:flex;align-items:center;justify-content:center;
  font-size:30px;
  margin-bottom:14px;
}

.tags span{
  display:inline-block;
  background:#eef2ff;
  padding:6px 12px;
  border-radius:20px;
  font-size:12px;
  margin:4px 6px 0 0;
}

.meta{
  margin-top:10px;
  font-size:13px;
  color:#374151;
}

.price{
  font-weight:600;
  margin-top:10px;
}

.actions{
  display:flex;
  gap:10px;
  margin-top:14px;
}

button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:14px;
  background:#0a73ff;
  color:white;
  font-weight:600;
  cursor:pointer;
}

.outline{
  background:white;
  color:#0a73ff;
  border:2px solid #0a73ff;
}

/* ===== BADGE ===== */
.badge{
  background:#e8fff3;
  color:#0f9d58;
  font-size:12px;
  font-weight:600;
  padding:4px 10px;
  border-radius:14px;
  display:inline-block;
  margin-top:6px;
}
</style>
</head>

<body>

  <div class="header">
  <div class="logo">
    <div class="logo-icon">
      <i class="fa-solid fa-heart"></i>
    </div>
    <div class="logo-text">CareConnect</div>
  </div>
</div>

<div class="container">

<h1>Explore Nurses</h1>
<p class="subtitle">Find the right nurse based on your patient‚Äôs care needs</p>

<!-- FILTERS -->
<div class="filters">
  <button class="filter-btn active" onclick="filterNurses('all')">All</button>
  <button class="filter-btn" onclick="filterNurses('dementia')">Dementia Care</button>
  <button class="filter-btn" onclick="filterNurses('postop')">Post-Operative</button>
  <button class="filter-btn" onclick="filterNurses('icu')">ICU / Critical</button>
  <button class="filter-btn" onclick="filterNurses('elderly')">Elderly Care</button>
  <button class="filter-btn" onclick="filterNurses('palliative')">Palliative</button>
</div>

<!-- NURSE GRID -->
<div class="grid" id="nurseGrid">
</div>

<script>
function filterNurses(type){
  const cards=document.querySelectorAll('.card');
  const buttons=document.querySelectorAll('.filter-btn');

  buttons.forEach(btn=>btn.classList.remove('active'));
  document.activeElement.classList.add('active');


  cards.forEach(card=>{
    const care=card.dataset.care;
    if(type==='all' || care.includes(type)){
      card.style.display='block';
    }else{
      card.style.display='none';
    }
  });
}
</script>
<script type="module">
import { db } from "./firebase.js";
import {
  collection,
  query,
  where,
  getDocs
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const nurseGrid = document.getElementById("nurseGrid");

// üî• Load nurses from Firestore
async function loadNurses() {
  nurseGrid.innerHTML = "";

  console.log("Fetching nurses...");

  const q = query(
    collection(db, "users"),
    where("role", "==", "nurse")
  );

  const snapshot = await getDocs(q);

  console.log("Docs found:", snapshot.size);

  if (snapshot.empty) {
    nurseGrid.innerHTML = "<p>No nurses available</p>";
    return;
  }

  snapshot.forEach(docSnap => {
    const n = docSnap.data();

    const card = document.createElement("div");
    card.className = "card";
    card.dataset.care = n.specialization?.toLowerCase() || "";

    card.innerHTML = `
      <div class="avatar">üë©‚Äç‚öïÔ∏è</div>
      <h3>${n.fullName || "Nurse"}</h3>

      <div class="tags">
        <span>${n.specialization || "General Care"}</span>
        <span>${n.availability || "Available"}</span>
      </div>

      <div class="meta">
        <i class="fa-solid fa-briefcase"></i>
        ${n.experience || 0} yrs experience<br>
        <i class="fa-solid fa-location-dot"></i>
        ${n.city || "India"}
      </div>

      <div class="price">‚Çπ${n.cost || "N/A"} / day</div>

      <div class="actions">
        <button onclick="viewProfile('${docSnap.id}')">View Profile</button>
        
      </div>
    `;

    nurseGrid.appendChild(card);
  });
}

loadNurses();

// üîó Redirect to nurse profile
window.viewProfile = function(uid) {
  window.location.href = `nurse-profile.html?uid=${uid}`;
};
</script>

</body>
</html>
